<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Truckcraft Bodies ¬∑ Intranet</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Barlow+Condensed:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f2f5f9;
      --panel: #ffffff;
      --panel-light: #f7f9fc;
      --text: #0f1728;
      --muted: #4a5568;
      --accent: #1b3d6b;
      --accent-2: #5fa8d3;
      --accent-3: #107f2f;
      --success: #0f9d58;
      --warning: #c26b00;
      --danger: #c0392b;
      --radius: 14px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.7;
    }

    .hidden {
      display: none !important;
    }

    body.locked {
      overflow: hidden;
    }

    .gate {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(15, 23, 40, 0.4);
      padding: 20px;
      z-index: 10;
    }

    .gate-panel {
      background: var(--panel);
      border: 1px solid #d6deea;
      border-radius: 18px;
      padding: 28px;
      max-width: 540px;
      width: 100%;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.12);
    }

    .gate-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }

    .gate-badge {
      background: rgba(163, 238, 59, 0.14);
      color: var(--success);
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid #bfe7d0;
      font-size: 13px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      font-weight: 700;
    }

    .gate h1 {
      margin: 0;
      font-size: 24px;
      font-family: 'Barlow Condensed', 'Inter', system-ui, sans-serif;
      letter-spacing: 0.5px;
    }

    .gate p {
      color: var(--muted);
      margin: 8px 0 16px;
      line-height: 1.6;
      font-size: 16px;
    }

    .gate form {
      display: grid;
      gap: 16px;
    }

    .gate .steps {
      background: var(--panel-light);
      border: 1px solid #d6deea;
      border-radius: 12px;
      padding: 14px;
      margin-top: 4px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.6;
    }

    .gate .steps strong {
      color: var(--text);
    }

    .gate .step-list {
      padding-left: 18px;
      margin: 8px 0 0;
    }

    .gate .step-list li {
      margin: 4px 0;
    }

    .gate label {
      display: grid;
      gap: 6px;
      font-weight: 700;
      color: var(--text);
      font-size: 15px;
    }

    .gate input {
      background: #fff;
      border: 1px solid #c8d4e5;
      border-radius: 12px;
      padding: 14px;
      color: var(--text);
      font-size: 16px;
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    .gate input:focus {
      border-color: var(--accent-2);
      box-shadow: 0 0 0 3px rgba(31, 82, 132, 0.15);
    }

    .gate button {
      padding: 14px 12px;
      background: var(--accent);
      color: #f7f9fc;
      border: none;
      border-radius: 12px;
      font-weight: 800;
      letter-spacing: 0.3px;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(27, 61, 107, 0.2);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .gate button:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(27, 61, 107, 0.24);
    }

    .gate .error {
      color: var(--danger);
      margin: 4px 0 0;
      font-size: 14px;
      min-height: 20px;
    }

    .gate .helper {
      font-size: 14px;
      color: var(--muted);
      margin: 6px 0 0;
    }

    .gate .helper-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .gate .chip {
      border: 1px solid rgba(135, 190, 232, 0.3);
      background: rgba(135, 190, 232, 0.08);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: border-color 0.15s ease, background 0.15s ease;
    }

    .gate .chip:hover {
      border-color: var(--accent);
      background: rgba(135, 190, 232, 0.14);
    }

    .page {
      max-width: 1080px;
      margin: 0 auto;
      padding: 28px 16px 48px;
    }

    header {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      align-items: center;
      margin-bottom: 20px;
    }

    header .title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    header h1 {
      margin: 0;
      font-size: 32px;
      font-family: 'Barlow Condensed', 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
      letter-spacing: 0.3px;
      font-weight: 800;
    }

    header .badge {
      background: #e7eff8;
      color: var(--accent);
      padding: 8px 12px;
      border-radius: var(--radius);
      font-weight: 700;
      border: 1px solid #c8d4e5;
      text-transform: uppercase;
      letter-spacing: 0.4px;
    }

    header .datetime {
      text-align: right;
      color: var(--muted);
      font-size: 15px;
    }

    .grid {
      display: grid;
      gap: 16px;
    }

    .grid.columns-3 {
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }

    .grid.columns-2 {
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    }

    .card {
      background: var(--panel);
      border: 1px solid #d6deea;
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: 0 12px 32px rgba(15, 23, 40, 0.08);
    }

    .card h2 {
      margin: 0 0 12px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card h2 span.icon {
      width: 36px;
      height: 36px;
      display: grid;
      place-items: center;
      background: #e7eff8;
      color: var(--accent);
      border-radius: 10px;
      border: 1px solid #c8d4e5;
      font-size: 16px;
    }

    .card p {
      margin: 0;
      color: var(--muted);
      line-height: 1.6;
      font-size: 15px;
    }

    .hero {
      padding: 22px;
      border: 1px solid #d6deea;
      background: var(--panel-light);
      position: relative;
      overflow: hidden;
    }

    .hero::after {
      display: none;
    }

    .hero h2 {
      font-size: 24px;
      font-family: 'Barlow Condensed', 'Inter', system-ui, sans-serif;
      letter-spacing: 0.4px;
    }

    .hero .tagline {
      font-size: 18px;
      margin: 8px 0 14px;
      font-family: 'Barlow Condensed', 'Inter', system-ui, sans-serif;
      letter-spacing: 0.4px;
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 12px 0;
    }

    .chip {
      background: #e7eff8;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid #c8d4e5;
      color: var(--muted);
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chip .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--accent);
      display: inline-block;
    }

    .quick-links, .dept-list, .resource-list {
      display: grid;
      gap: 10px;
    }

    .quick-links a, .resource-list button, .resource-list a {
      display: flex;
      align-items: center;
      justify-content: space-between;
      text-decoration: none;
      padding: 12px 14px;
      color: var(--text);
      background: var(--panel-light);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.04);
      transition: transform 0.2s ease, border-color 0.2s ease;
      font-size: 14px;
    }

    .resource-list button, .resource-list a {
      color: var(--text);
    }

    .quick-links a:hover, .resource-list button:hover, .resource-list a:hover {
      transform: translateY(-2px);
      border-color: rgba(34, 211, 238, 0.35);
    }

    .quick-links a span, .resource-list button span, .resource-list a span {
      color: var(--muted);
      font-size: 12px;
    }

    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .pill.success { background: #e6f4ea; color: var(--success); border: 1px solid #c4e3cd; }
    .pill.warning { background: #fff4e5; color: var(--warning); border: 1px solid #ffd9a1; }
    .pill.info { background: #e7eff8; color: var(--accent); border: 1px solid #c8d4e5; }
    .pill.danger { background: #fdecea; color: var(--danger); border: 1px solid #f5c6c1; }

    .announcement {
      padding: 12px;
      background: var(--panel-light);
      border-radius: 10px;
      border: 1px solid #d6deea;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: center;
    }

    .announcement strong {
      color: var(--text);
    }

    .announcement span {
      color: var(--muted);
      font-size: 13px;
    }

    .table-like {
      display: grid;
      gap: 12px;
    }

    .table-row {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 12px;
      background: var(--panel-light);
      border-radius: 10px;
      border: 1px solid #d6deea;
    }

    .table-row .label { color: var(--text); font-weight: 600; }
    .table-row .meta { color: var(--muted); font-size: 13px; }

    .search {
      position: relative;
      margin: 10px 0 14px;
    }

    .search input {
      width: 100%;
      padding: 14px 14px;
      border-radius: 10px;
      border: 1px solid #c8d4e5;
      background: #fff;
      color: var(--text);
      font-size: 15px;
      outline: none;
    }

    .footer {
      margin-top: 20px;
      color: var(--muted);
      font-size: 13px;
      text-align: center;
    }

    @media (max-width: 720px) {
      header { grid-template-columns: 1fr; }
      header .datetime { text-align: left; }
      .table-row { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div id="access-gate" class="gate">
    <div class="gate-panel" role="dialog" aria-modal="true" aria-labelledby="gate-title">
      <div class="gate-header">
        <h1 id="gate-title">Truckcraft Bodies ¬∑ Staff access</h1>
        <div class="gate-badge">Internal use</div>
      </div>
      <p>For security, please confirm your Truckcraft email and the current staff access code before using the intranet.</p>
      <form id="gate-form">
        <label>
          Truckcraft email
          <input id="gate-email" name="email" type="email" autocomplete="email" placeholder="you@truckcraftbodies.co.uk" required>
        </label>
        <label>
          Access code
          <input id="gate-code" name="code" type="password" autocomplete="current-password" placeholder="Enter the shared code" required>
        </label>
        <button type="submit">Unlock intranet</button>
        <div class="error" id="gate-error" role="alert"></div>
        <div class="helper">Follow these quick steps so everyone‚Äîincluding less technical team members‚Äîcan sign in smoothly:</div>
        <div class="steps" aria-live="polite">
          <strong>Step-by-step</strong>
          <ol class="step-list">
            <li>Type your Truckcraft email address (ends with @truckcraftbodies.co.uk or @truckcraft.com).</li>
            <li>Enter the current staff access code shared by IT &amp; Security.</li>
            <li>Press ‚ÄúUnlock intranet.‚Äù We‚Äôll remember you on this device for 8 hours.</li>
          </ol>
          <div class="helper-actions">
            <button type="button" class="chip" id="fill-default-code" aria-label="Fill the temporary access code">üîì Fill temporary code</button>
            <span class="chip" aria-live="polite">Need help? Call reception and ask for the Truckcraft intranet code.</span>
          </div>
        </div>
        <div class="helper">Lost the code? Contact IT &amp; Security to reset access. For now, you can use the temporary code button above.</div>
      </form>
    </div>
  </div>

  <div id="app-content" class="page hidden" aria-hidden="true">
    <header>
      <div class="title">
        <div class="badge">Truckcraft Bodies</div>
        <div>
          <h1>Premium in every sense.</h1>
          <div style="color: var(--muted); font-size: 14px;">A product by 7th Day Media ¬∑ The logical choice for a job well done.</div>
        </div>
      </div>
      <div class="datetime">
        <div id="datetime"></div>
        <div id="auth-meta" style="margin-top: 4px; color: var(--muted); font-size: 14px;">Staff gate active</div>
      </div>
    </header>

    <section class="card hero">
      <h2><span class="icon">‚ö°</span>Truckcraft intranet</h2>
      <div class="tagline">Simple daily tools for every teammate.</div>
      <p>Use the buttons below to reach our most common systems, check today‚Äôs notes, and see who‚Äôs available. Clear text, high contrast, and large touch targets keep things friendly for everyone.</p>
      <div class="chips">
        <div class="chip"><span class="dot"></span>Designed for easy reading</div>
        <div class="chip"><span class="dot" style="background: var(--warning);"></span>Need help? Contact Service Desk</div>
        <div class="chip"><span class="dot" style="background: var(--accent-3);"></span>Staff-only access is active</div>
      </div>
    </section>

    <div class="grid columns-3" style="margin-top: 18px;">
      <div class="card">
        <h2><span class="icon">üì¢</span>Announcements</h2>
        <div class="table-like">
          <div class="announcement">
            <div>
              <strong>Brand kit refresh</strong><br>
              <span>Download the new Space Blue/Maya Blue pack for all proposals.</span>
            </div>
            <div class="pill info">Update</div>
          </div>
          <div class="announcement">
            <div>
              <strong>Customer-first pledge</strong><br>
              <span>Voice-and-tone rollout across all outbound comms this week.</span>
            </div>
            <div class="pill success">Live</div>
          </div>
          <div class="announcement">
            <div>
              <strong>Photography standards</strong><br>
              <span>Use on-site truck and team imagery‚Äîno stock photos.</span>
            </div>
            <div class="pill warning">Reminder</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h2><span class="icon">üóÇÔ∏è</span>Quick Links</h2>
        <div class="quick-links">
          <a href="#">
            Build Tracker
            <span>Production milestones and approvals</span>
          </a>
          <a href="#">
            Customer Portal
            <span>Quotes, specs, aftercare</span>
          </a>
          <a href="#">
            Brand Assets
            <span>Logos, patterns, templates</span>
          </a>
          <a href="#">
            Fleet Service Desk
            <span>Request support or report an issue</span>
          </a>
          <a href="#">
            Safety & Compliance
            <span>Policies, inductions, certifications</span>
          </a>
        </div>
      </div>

      <div class="card">
        <h2><span class="icon">üìÖ</span>Events</h2>
        <div class="table-like">
          <div class="table-row">
            <div class="label">Truckcraft town hall</div>
            <div class="meta">Thursday ¬∑ 10:00 AM</div>
            <div class="pill info">Streaming</div>
          </div>
          <div class="table-row">
            <div class="label">Customer-first AMA</div>
            <div class="meta">Friday ¬∑ 2:00 PM</div>
            <div class="pill success">Open Q&A</div>
          </div>
          <div class="table-row">
            <div class="label">Brand consistency clinic</div>
            <div class="meta">Monday ¬∑ 4:00 PM</div>
            <div class="pill warning">Limited seats</div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid columns-2" style="margin-top: 18px;">
      <div class="card">
        <h2><span class="icon">üìö</span>Team Directory</h2>
        <p>Find the right contact by team and availability.</p>
        <div class="search">
          <input type="text" id="team-search" placeholder="Filter by team or name" aria-label="Search team directory">
        </div>
        <div class="dept-list" id="team-directory" aria-live="polite"></div>
      </div>

      <div class="card">
        <h2><span class="icon">üß≠</span>Resource Finder</h2>
        <p>Search guides, forms, and playbooks.</p>
        <div class="search">
          <input type="text" id="search" placeholder="Search resources (e.g. brand kit, spec sheet)" aria-label="Search resources">
        </div>
        <div class="resource-list" id="resources" aria-live="polite"></div>
      </div>
    </div>

      <div class="card" style="margin-top: 18px;">
        <h2><span class="icon">üõ†Ô∏è</span>Systems Status</h2>
        <div class="grid columns-3">
          <div class="announcement">
            <div>
            <strong>Build line</strong><br>
            <span>Production bays running to schedule</span>
            </div>
            <div class="pill success">Operational</div>
          </div>
          <div class="announcement">
            <div>
            <strong>Spec library</strong><br>
            <span>Maintenance window Fri 8pm</span>
            </div>
            <div class="pill warning">Scheduled</div>
          </div>
          <div class="announcement">
            <div>
            <strong>Customer portal</strong><br>
            <span>Increased latency in EU region</span>
            </div>
            <div class="pill danger">Degraded</div>
          </div>
          <div class="announcement">
            <div>
            <strong>Mail</strong><br>
            <span>Queued deliveries cleared</span>
            </div>
            <div class="pill success">Operational</div>
          </div>
          <div class="announcement">
            <div>
            <strong>Chat</strong><br>
            <span>Rolling out message reactions</span>
            </div>
            <div class="pill info">Update</div>
          </div>
          <div class="announcement">
            <div>
            <strong>Directory</strong><br>
            <span>New groups synced hourly</span>
            </div>
            <div class="pill success">Operational</div>
          </div>
        </div>
      </div>

    <div class="footer">Premium in every sense ‚Äî unify every touchpoint with the Truckcraft Bodies brand and customer-first service.</div>
  </div>

  <script>
    const SESSION_KEY = 'tcb_staff_session';
    const SESSION_TTL = 8 * 60 * 60 * 1000; // 8 hours
    const ACCESS_CODE_HASH = '291c82c92e1c903d74ba42ace63d9d51ac416f092b1e27cf0584a26942e6e990';
    const DEFAULT_CODE = 'premium-in-every-sense';
    const allowedDomains = ['truckcraftbodies.co.uk', 'truckcraft.com'];

    const gateEl = document.getElementById('access-gate');
    const gateForm = document.getElementById('gate-form');
    const gateEmail = document.getElementById('gate-email');
    const gateCode = document.getElementById('gate-code');
    const gateError = document.getElementById('gate-error');
    const gateFillDefault = document.getElementById('fill-default-code');
    const appContent = document.getElementById('app-content');
    const authMeta = document.getElementById('auth-meta');

    function emailIsAllowed(email) {
      const normalized = email.trim().toLowerCase();
      return allowedDomains.some(domain => normalized.endsWith(`@${domain}`));
    }

    async function hashString(value) {
      const encoder = new TextEncoder();
      const buffer = await crypto.subtle.digest('SHA-256', encoder.encode(value));
      return Array.from(new Uint8Array(buffer)).map(b => b.toString(16).padStart(2, '0')).join('');
    }

    function setAuthMeta(email = '') {
      if (!authMeta) return;
      authMeta.textContent = email ? `Signed in as ${email}` : 'Staff gate active';
      authMeta.style.color = email ? 'var(--accent)' : 'var(--muted)';
    }

    function persistSession(email) {
      try {
        localStorage.setItem(SESSION_KEY, JSON.stringify({ email, timestamp: Date.now() }));
      } catch (err) {
        console.warn('Unable to persist session', err);
      }
    }

    function clearSession() {
      try {
        localStorage.removeItem(SESSION_KEY);
      } catch (err) {
        console.warn('Unable to clear session', err);
      }
    }

    function loadSession() {
      try {
        const raw = localStorage.getItem(SESSION_KEY);
        if (!raw) return null;
        const data = JSON.parse(raw);
        const isFresh = Date.now() - data.timestamp < SESSION_TTL;
        if (data.email && emailIsAllowed(data.email) && isFresh) {
          return data;
        }
        clearSession();
      } catch (err) {
        console.warn('Unable to load session', err);
      }
      return null;
    }

    function showGate(message = '') {
      if (gateEl) gateEl.classList.remove('hidden');
      if (appContent) {
        appContent.classList.add('hidden');
        appContent.setAttribute('aria-hidden', 'true');
      }
      document.body.classList.add('locked');
      setAuthMeta('');
      if (gateError) gateError.textContent = message;
      if (gateEmail) gateEmail.focus();
    }

    function unlock(email) {
      if (gateEl) gateEl.classList.add('hidden');
      if (appContent) {
        appContent.classList.remove('hidden');
        appContent.setAttribute('aria-hidden', 'false');
      }
      document.body.classList.remove('locked');
      if (gateError) gateError.textContent = '';
      setAuthMeta(email);
    }

    if (gateForm) {
      gateForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        const email = (gateEmail?.value || '').trim().toLowerCase();
        const code = (gateCode?.value || '').trim();

        if (!emailIsAllowed(email)) {
          if (gateError) gateError.textContent = 'Use your Truckcraft email to continue.';
          return;
        }

        if (!code) {
          if (gateError) gateError.textContent = 'Enter the staff access code provided by IT & Security.';
          return;
        }

        const hashed = await hashString(code);
        if (hashed !== ACCESS_CODE_HASH) {
          if (gateError) gateError.textContent = 'Invalid access code. Request a reset from IT & Security.';
          return;
        }

        persistSession(email);
        unlock(email);
      });
    }

    if (gateFillDefault && gateCode) {
      gateFillDefault.addEventListener('click', () => {
        gateCode.value = DEFAULT_CODE;
        gateCode.focus();
        gateCode.setSelectionRange(gateCode.value.length, gateCode.value.length);
        if (gateError) gateError.textContent = 'Temporary code filled‚Äîpress Unlock intranet to continue.';
      });
    }

    const existingSession = loadSession();
    if (existingSession) {
      unlock(existingSession.email);
    } else {
      showGate();
    }

    const resourceData = [
      { title: 'Brand Assets', category: 'Design', link: '#', tags: ['Logos', 'Patterns', 'Templates'] },
      { title: 'Voice & Tone Guide', category: 'Marketing', link: '#', tags: ['Premium', 'Customer-first'] },
      { title: 'Photography Direction', category: 'Brand', link: '#', tags: ['People', 'Vehicles'] },
      { title: 'Build Specification Sheet', category: 'Engineering', link: '#', tags: ['Requirements', 'Approvals'] },
      { title: 'Aftercare Playbook', category: 'Customer Success', link: '#', tags: ['Service', 'Maintenance'] },
      { title: 'Safety Induction', category: 'Operations', link: '#', tags: ['Compliance', 'Training'] },
      { title: 'Fleet Manager Kit', category: 'Sales', link: '#', tags: ['Pitch', 'FAQ'] },
      { title: 'Travel & Expenses', category: 'People Operations', link: '#', tags: ['Policy', 'Form'] },
    ];

    const teamData = [
      { team: 'Engineering', contact: 'Alex Rivera', email: 'engineering@truckcraft.com', status: 'Available', badge: 'success' },
      { team: 'Customer Success', contact: 'Jordan Smith', email: 'success@truckcraft.com', status: 'On call', badge: 'info' },
      { team: 'People Operations', contact: 'Priya Shah', email: 'people@truckcraft.com', status: 'EOD replies', badge: 'warning' },
      { team: 'Brand & Marketing', contact: 'Samira Chen', email: 'brand@truckcraft.com', status: 'Reviewing assets', badge: 'warning' },
      { team: 'Sales', contact: 'Taylor Lee', email: 'sales@truckcraft.com', status: 'Available', badge: 'success' },
      { team: 'IT & Security', contact: 'Morgan Patel', email: 'security@truckcraft.com', status: 'Available', badge: 'success' },
    ];

    const resourcesEl = document.getElementById('resources');
    const searchInput = document.getElementById('search');
    const teamEl = document.getElementById('team-directory');
    const teamSearchInput = document.getElementById('team-search');

    function renderResources(filter = '') {
      const term = filter.trim().toLowerCase();
      resourcesEl.innerHTML = '';
      const filtered = resourceData.filter(item => {
        const text = `${item.title} ${item.category} ${item.tags.join(' ')}`.toLowerCase();
        return text.includes(term);
      });

      if (!filtered.length) {
        resourcesEl.innerHTML = '<p style="color: var(--muted); margin: 4px 0 0;">No resources found.</p>';
        return;
      }

      filtered.forEach(item => {
        const anchor = document.createElement('a');
        anchor.href = item.link;
        anchor.target = '_blank';
        anchor.rel = 'noreferrer';
        anchor.innerHTML = `
          <div>
            <div style="font-weight: 600;">${item.title}</div>
            <span>${item.category} ¬∑ ${item.tags.join(', ')}</span>
          </div>
          <span style="color: var(--accent);">Open</span>
        `;
        resourcesEl.appendChild(anchor);
      });
    }

    renderResources();

    searchInput.addEventListener('input', (e) => {
      renderResources(e.target.value);
    });

    function renderTeams(filter = '') {
      const term = filter.trim().toLowerCase();
      teamEl.innerHTML = '';
      const filtered = teamData.filter(item => {
        const text = `${item.team} ${item.contact} ${item.status}`.toLowerCase();
        return text.includes(term);
      });

      if (!filtered.length) {
        teamEl.innerHTML = '<p style="color: var(--muted); margin: 4px 0 0;">No matching teams.</p>';
        return;
      }

      filtered.forEach(item => {
        const row = document.createElement('div');
        row.className = 'table-row';
        row.innerHTML = `
          <div class="label">${item.team}</div>
          <div class="meta">${item.contact} ¬∑ <a href="mailto:${item.email}" style="color: var(--accent); text-decoration: none;">${item.email}</a></div>
          <div class="pill ${item.badge}">${item.status}</div>
        `;
        teamEl.appendChild(row);
      });
    }

    renderTeams();
    teamSearchInput.addEventListener('input', (e) => {
      renderTeams(e.target.value);
    });

    function updateTime() {
      const now = new Date();
      const options = { weekday: 'long', month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' };
      document.getElementById('datetime').textContent = now.toLocaleString(undefined, options);
    }

    updateTime();
    setInterval(updateTime, 60000);
  </script>
</body>
</html>
